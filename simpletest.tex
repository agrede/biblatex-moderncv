%% simpletest.tex
%% Copyright (c) 2013--2014 Alex J. Grede <agrede@gmail.com>
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%% http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% The Current Maintainer of this work is Alex J. Grede
%%
%% This work consists of all files listed in manifest.txt.

\documentclass[letter,10pt,american]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{xcolor}
\usepackage{textcomp}
\usepackage[
   breaklinks=true,
   colorlinks=true,
   linkcolor=blue,
   citecolor=blue,
   urlcolor=blue]{hyperref}
\usepackage[american]{babel}
\usepackage{csquotes}
\usepackage[
   backend=biber,
   style=moderncv,
   showevent=true,
   authorrole=true,
   defernumbers=true,
   groupproceedings=true,
   subentry=true,
   authorhash=7ba24cb78eaec483f680a08422f4d516]{biblatex}

\DeclareLanguageMapping{american}{american-moderncv}
\ExecuteBibliographyOptions{sorting=cvtype}
\renewcommand*{\bibfont}{\footnotesize}
\definecolor{color0}{rgb}{0,0,0}% black
\definecolor{color1}{rgb}{0.22,0.45,0.70}% light blue
\definecolor{color2}{rgb}{0.45,0.45,0.45}% dark grey
\newcommand*{\hintfont}{\normalsize}
\newcommand*{\hintstyle}[1]{{\hintfont\textcolor{color0}{#1}}}
\newlength{\hintscolumnwidth}
\setlength{\hintscolumnwidth}{0.175\textwidth}
\newlength{\separatorcolumnwidth}
\setlength{\separatorcolumnwidth}{0.025\textwidth}
\renewcommand*{\indauthorhash}[1]{\mkbibcolor{red}{#1}}
\addbibresource{demo.bib}
\newcommand*{\myyearlist}{}
\forcsvlist{\listadd\myyearlist}{2014,2013,2012,2011}
\forlistloop{\DeclareBibliographyCategory}{\myyearlist}
\newcommand*{\myheading}[1]{\defbibheading{#1}{\subsection*{#1}}}
% \newcommand*{\myaddcat}[2]{
%   \ifcsundef{blx@catg@#1}
%     {
%       \DeclareBibliographyCategory{#1}
%       \myheading{#1}
%     }
%     {}
%   \addtocategory{#1}{#2}
% }

\forlistloop{\myheading}{\myyearlist}
\AtDataInput{\addtocategory{\strfield{year}}{\strfield{entrykey}}}

\begin{document}

\nocite{*}

\printbibheading
\bibbycategory

\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
